name: CI & Deploy (minimal debug)

# Trigger on push and allow manual dispatch for debugging
on:
  push:
    branches: [ main ]
  workflow_dispatch: {}

jobs:
  simple-debug:
    name: Minimal debug job
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Print runner info
        run: |
          echo "==== Runner info ===="
          uname -a || true
          echo "\n=== Node ==="; node --version || true
          echo "\n=== Docker ==="; docker --version || true
          echo "\n=== Env sample ==="; env | sort | head -n 50
      - name: List workflow file
        run: |
          echo "--- workflow file contents ---"
          sed -n '1,200p' .github/workflows/ci-deploy.yml || true
